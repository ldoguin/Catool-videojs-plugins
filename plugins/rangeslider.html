<!DOCTYPE HTML>
<html>
<head>
	<title>Range Slider Plugin</title>
	
	<!-- jQuery -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

	<!-- Video.js Source Files -->
	<script src='../video-js/src/core.js'></script>
	<script src='../video-js/src/lib.js'></script>
	<script src='../video-js/src/json.js'></script>
	<script src='../video-js/src/events.js'></script>

	<script src='../video-js/src/component.js'></script>
	<script src='../video-js/src/player.js'></script>
	<script src='../video-js/src/tech.js'></script>
	<script src='../video-js/src/controls.js'></script>

	<script src='../video-js/src/tracks.js'></script>

	<script src='../video-js/tech/html5/html5.js'></script>
	<script src='../video-js/tech/flash/flash.js'></script>

	<script src='../video-js/src/setup.js'></script>
	
	<script>
		_V_.options.flash.swf = "../video-js/tech/flash/video-js.swf"
	</script>
	<!-- END Video.js Source Files -->
	
	<!-- Video.js Plugins -->
	<script src="rangeslider.js"></script>
	<!-- END Plugins -->

	<link rel="stylesheet" type="text/css" href="../video-js/design/video-js.css" />
	<link   href="rangeslider.css" rel="stylesheet" type="text/css" />
</head>
<body>

<video id="my_video_1" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264">
	<!--source src="Incredibles_Teaser.m4v" type='video/mp4'-->
	<source src="Toy_Story3_Trailer.mp4" type="video/mp4">
</video>


<fieldset style="margin-top: 2em; width: 600px;">
	<legend>Update Slider Values</legend>
	Start: <input type="text" id="start_time" /><br/>
	End: <input type="text" id="end_time" /><br/>
	<input type="checkbox" id="lock_slider" value="1" /> Lock Slider<br/>
</fieldset>
</p>

<script>
(function() {
	var vid = 'my_video_1';

	var addOptions = { 
		plugins: 'rangeslider', 
		techOrder: ['flash', 'html5'] 
	};

	var onReady = function() {
		var player = this;
		var plugin = this.getPlugin('rangeslider');

		var $start_time = $('#start_time');
		var $end_time = $('#end_time');
		var $lock_slider = $('#lock_slider');

		var onChange = function(index) {
			return function(evt) {
				var val = parseInt($(this).val(), 10);
				if(!isNaN(val)) {
					plugin.setValue(index, val);
				}
			};
		}

		// change lock status on slider
		$lock_slider.change(function(event) {
			var locked = $(this).attr('checked') ? true : false;
			var action = locked?'lock':'unlock';
			plugin[action]();

			console.log(action + ' slider handles');
		});
		
		// update slider on form changes
		$start_time.bind('keyup', onChange(0));
		$end_time.bind('keyup', onChange(1));
		
		// update the form on slider changes
		player.on('rangesliderchange', function(event) {
			var status = plugin.currentStatus();

			$start_time.val(_V_.round(status.values[0], 0));
			$end_time.val(_V_.round(status.values[1], 0));

			console.log("currentStatus", status);
		});

		// show the slider
		plugin.show();
	};

	_V_(vid, addOptions, onReady);
})();
</script>

</body
</html>
